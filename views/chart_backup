extends layout


block content
  h3=title
  div(style="margin-left: auto; margin-right: auto; background-color: #F5F5F5; border-bottom: 2px solid red;")
    form(method='POST' action='')
      div(style="padding: 30px;")
        div.form-group(style="width:200px")
          label(for='glyph_name') Glyph Name:
          input#glyph_name.form-control(type='text' placeholder='Set Glyph name' name='glyph_name' required='false' value=(undefined===visual ? '' :  visual.glyph_name))


        div.form-group(style="width:200px")
          label(for='Marker') Marker:
          select#Marker.form-control(type='select' placeholder='Select status' name='Marker' required='false')
            for glyph in marker_list
              if sensor
                option(value=glyph.marker_name selected=(sensor.glyph==glyph.marker_name ? 'selected' : false)) #{glyph.marker_name}
              else
                option(value=glyph.marker_name) #{glyph.marker_name}

                h4.border-bottom TABS

        .tab-wrapper
            ul.nav.nav-tabs.u-mr-top-20#myTab(role="tablist")
                li.nav-item
                    a.nav-link#profile-tab(data-toggle="tab", href="#profile1", role="tab", aria-controls="profile1", aria-selected="false") Glyph Attributes
                li.nav-item
                    a.nav-link#profile-tab(data-toggle="tab", href="#profile", role="tab", aria-controls="profile", aria-selected="false") Data Mapping
        
        .tab-content.u-pd-15#myTabContent
            .tab-pane.fade#profile1(role="tabpanel", aria-labelledby="profile-tab")
              br
              .row
                div(style=" float: left;")
                  .col-sm-2(style=" margin-right:100px")
                    div.form-group(style="width:150px;")
                      label(for='type') Chart Type:
                      select#type.form-control(type='select' placeholder='Set maximum value of your data, 10, 13, 300, etc' name='type' required='true')
                        for type in bar_type
                          if sensor
                            option(value=type.bar_type selected=(sensor.bar_type==type.bar_type ? 'selected' : false)) #{type.bar_type}
                          else
                            option(value=type.bar_type) #{type.bar_type}
                  
                  .col-sm-2
                    div.form-group(style="width:150px;")
                      label(for='color_max_range') Chart Height
                      input#color_max_range.form-control(type='text' style="width:90px;" placeholder='0.5 to 1.5'  name='color_max_range' required='false' value=(undefined===sensor_color ? '' : sensor_color.max_range))

                  .col-sm-2
                    div.form-group(style="width:150px;")
                      label(for='color_max_range') Chart Width
                      input#color_max_range.form-control(type='text' style="width:90px;" placeholder='1 to 2'  name='color_max_range' required='false' value=(undefined===sensor_color ? '' : sensor_color.max_range))

                  .col-sm-1
                    div.form-group(style="width:150px;")
                      label(for='color_max_range') Max Data Batches
                      input#color_max_range.form-control(type='text' style="width:90px;" placeholder='1 to 10'  name='color_max_range' required='false' value=(undefined===sensor_color ? '' : sensor_color.max_range))

              .row
                .div(style=" float: left; margin:15px")
                    .image-block
                      img.image(src='/direction.png' width="225" height="225" alt="Marker")
                .div(style=" float: left; margin-left:50px")
                  .row
                    h4 Glyph Position
                  .row
                    .div
                      .col-sm-2
                        div.form-group
                          label(for='x_axis') X Axis:
                          input#x_axis.form-control(type='text' style=" width:70px;" placeholder='0'  name='x_axis' required='false' value=(undefined===visual ? '' : visual.x_axis))

                      .col-sm-2(style="margin-left:20px")
                        div.form-group
                          label(for='y_axis') Y Axis:
                          input#y_axis.form-control(type='text' style=" width:70px;" placeholder='0'  name='y_axis' required='false' value=(undefined===visual ? '' : visual.y_axis))

                      .col-sm-2(style="margin-left:20px")
                        div.form-group
                          label(for='z_axis') Z Axis:
                          input#z_axis.form-control(type='text' style="width:70px;" placeholder='0'  name='z_axis' required='false' value=(undefined===visual ? '' : visual.z_axis))

                  .row
                    h4 Glyph Rotation
                  .row
                    .div
                      .col-sm-2
                        div.form-group
                          label(for='x_rot') X Rotation:
                          input#x_rot.form-control(type='text' style=" width:70px;" placeholder='0'  name='x_rot' required='false' value=(undefined===visual ? '' : visual.x_rot))

                      .col-sm-2(style="margin-left:20px")
                        div.form-group
                          label(for='y_rot') Y Rotation:
                          input#y_rot.form-control(type='text' style=" width:70px;" placeholder='0'  name='y_rot' required='false' value=(undefined===visual ? '' : visual.y_rot))

                      .col-sm-2(style="margin-left:20px")
                        div.form-group
                          label(for='z_rot') Z Rotation:
                          input#z_rot.form-control(type='text' style="width:70px;" placeholder='0'  name='z_rot' required='false' value=(undefined===visual ? '' : visual.z_rot))



            .tab-pane.fade#profile(role="tabpanel", aria-labelledby="profile-tab")
              block content
                br
                br
                div(id='readroot' style='display: none;')
                  .row
                    .col-sm-2(style="margin-right:50px")
                      div.form-group
                        label(for='glyph') Sensor :
                        select#glyph.form-control(type='select'  placeholder='Select status' name='glyph' required='false' style="width:150px;")
                          option(value='nothing') Not Assigned
                          for glyph in mark_list
                            if sensor
                              option(value=glyph._id selected=(sensor.glyph==glyph.sensor_name ? 'selected' : false)) #{glyph.sensor_name}
                            else
                              option(value=glyph._id) #{glyph.sensor_name}
                    .col-sm-2(name='min_val_')
                      div.form-group(style='width:100px')
                        label(for='min_val_') Min. Value:
                        input#min_val_.form-control(type='text' style=" width:70px;" placeholder='0'  name='min_val_'  value=(undefined===visual ? '' : visual.min_val_))
                    .col-sm-2(name='max_val_')
                      div.form-group(style='width:100px')
                        label(for='max_val_') Max. Value:
                        input#max_val_.form-control(type='text' style=" width:70px;" placeholder='0'  name='max_val_'  value=(undefined===visual ? '' : visual.max_val_))
                    .col-sm-2(name='def_color_')
                      div.form-group(style='width:120px')
                        label(for='def_color_' ) Bar/Chart Color:
                        input#def_color_.form-control(type='text' style="width:70px;" placeholder='0'  name='def_color_' value=(undefined===visual ? '' : visual.def_color_))
                    
                    input(type='button' value="X" style='border-radius: 5px; margin:15px; width:40px; height:40px; background:#F88379; color:white' onclick="this.parentNode.parentNode.removeChild(this.parentNode);")
                
                span(id='writeroot')
                br
                input(type='button' onclick="moreFields()" value=' Add Fields ' style='border-radius: 5px; background:#568203; color:white; height:40px;')

        hr
        button.btn.btn-primary() Submit

  script(type="text/javascript").
    var counter = 0;
    function moreFields() {
      counter++;
      var newFields = document.getElementById('readroot').cloneNode(true);
      newFields.id = '';
      newFields.style.display = 'block';
      var newField = newFields.childNodes;
      for (var i=0;i<newField.length;i++) {
        var theName = newField[i].name
        if (theName)
          newField[i].name = theName + counter;
      }
      var insertHere = document.getElementById('writeroot');
      insertHere.parentNode.insertBefore(newFields,insertHere);
    }
    window.onload = moreFields;
